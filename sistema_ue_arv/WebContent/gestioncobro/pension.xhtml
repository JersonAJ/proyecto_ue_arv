<ui:composition template="/layout/layout.xhtml"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
xmlns:h="http://xmlns.jcp.org/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:f="http://xmlns.jcp.org/jsf/core">
			
	<ui:define name="titulo"><i class="fa fa-money" /> Gestión de cobros / Pensiones</ui:define>
	
	<ui:define name="content">
		<h:form id="form" style="width: 100%">
			<f:metadata>		    
			    <f:viewAction action="#{general.validaSesion}" />
			</f:metadata>
				
			<p:growl id="growl" for="growl" showDetail="true" closable="true" />
			
			<p:outputPanel style="background-color: white; padding: 5px;">
			
			</p:outputPanel>
			
			<!-- CONSULTA -->	
			<style>				
				.ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td, .ui-datatable tfoot th { padding: 2px 10px; }
			</style>
			<br/>		
			<p:outputPanel>		   		
		   		<p:selectOneMenu id="soPeriodo" value="#{pension.soPeriodo}">
					<f:selectItem itemLabel="Seleccione Período" itemValue="NA" />
					<f:selectItems value="#{pension.listPeriodos}" />
					<p:ajax listener="#{pension.onChangePeriodo()}" update="soOferta soEstudiante dt"/>						
				</p:selectOneMenu>	
				<p:spacer width="10px" />
				<p:selectOneMenu id="soOferta" value="#{pension.soOferta}">
					<f:selectItem itemLabel="Seleccione Oferta" itemValue="NA" />
					<f:selectItems value="#{pension.listOfertas}" />
					<p:ajax listener="#{pension.onChangeOferta()}" update="soEstudiante dt"/>
				</p:selectOneMenu>	
				<p:spacer width="10px" />				
				<p:selectOneMenu id="soEstudiante" value="#{pension.soEstudiante}" effect="fade" widgetVar="t" filter="true" filterMatchMode="contains">
					<f:selectItem itemLabel="Seleccione Estudiante" itemValue="NA" />
					<f:selectItems value="#{pension.listEstudiantes}" />	
				    <p:column>
		                <h:outputText value="#{t}" />
		            </p:column>			 
		            <p:ajax listener="#{pension.onChangeEstudiante()}" update="dt"/>
		        </p:selectOneMenu>			       
				
							   		  		    			      				      		      			
			</p:outputPanel>
			 				 	
			<p:separator />
			
			<p:dataTable id="dt" var="dtpension" value="#{pension.pensionList}" tableStyle="width: auto; min-width: 100%;" 
				paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                currentPageReportTemplate="{currentPage} de {totalPages}"
                paginator="true" rows="10" rowsPerPageTemplate="5,10" paginatorPosition="top" emptyMessage="No existen datos a mostrar" >
									    
				<p:column headerText="Matricula">
			        <h:outputText value="#{dtpension.matMatricula.idMatricula}" />
			    </p:column>			    			    			 
			    
				 <f:facet name="footer">  
			        <h:outputText id="footer" value="#{pension.pensionList.size()} Registros" />  
			    </f:facet>  	  
			</p:dataTable>
			
						
			<br/>
			<p:outputPanel style="background-color: white; padding: 5px; text-align: end">
				<h:commandLink value="Exportar a excel" style="color: green">                
	                <p:dataExporter type="xlsx" target="dt" fileName="pensions" />
	            </h:commandLink>		   
            </p:outputPanel>
						
	   	</h:form>
	</ui:define>		
	
</ui:composition>
